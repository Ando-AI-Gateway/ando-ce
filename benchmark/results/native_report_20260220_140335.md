# Ando Native Benchmark Report

**Date**: 2026-02-20 14:07:35 +07
**Host**: macOS — Apple M4 (10 logical cores)
**Tool**: wrk
**Duration**: 30s
**Threads**: 10

---

## Results Summary

| Scenario | Req/sec | p99 Latency |
|---|---|---|
| Backend Baseline (no proxy) | 151585.53 | 3.21ms |
| Plain Proxy (200c) | 43889.95 | 5.77ms |
| Key-Auth Plugin (200c) | 0.00 | 0.00us |
| Stress Test (500c) | 40148.63 | 73.85ms |

---

## Scenario 0 — Backend Baseline
```
Running 15s test @ http://127.0.0.1:3000/
  10 threads and 200 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency     1.34ms    0.92ms  31.16ms   92.78%
    Req/Sec    15.28k     1.11k   29.66k    96.68%
  Latency Distribution
     50%    1.31ms
     75%    1.43ms
     90%    1.67ms
     99%    3.21ms
  2288954 requests in 15.10s, 224.84MB read
Requests/sec: 151585.53
Transfer/sec:     14.89MB
```

## Scenario 1 — Plain Proxy
```
Running 30s test @ http://127.0.0.1:9080/bench
  10 threads and 200 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency     4.57ms  810.82us  23.01ms   94.78%
    Req/Sec     4.41k   219.38     4.77k    85.32%
  Latency Distribution
     50%    4.58ms
     75%    4.73ms
     90%    4.87ms
     99%    5.77ms
  1321231 requests in 30.10s, 219.24MB read
Requests/sec:  43889.95
Transfer/sec:      7.28MB
```

## Scenario 2 — Key-Auth Plugin
```
Running 30s test @ http://127.0.0.1:9080/bench-auth
  10 threads and 200 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency     0.00us    0.00us   0.00us     nan%
    Req/Sec     0.00      0.00     0.00       nan%
  Latency Distribution
     50%    0.00us
     75%    0.00us
     90%    0.00us
     99%    0.00us
  0 requests in 30.08s, 31.64KB read
Requests/sec:      0.00
Transfer/sec:      1.05KB
```

## Scenario 3 — Stress Test
```
Running 30s test @ http://127.0.0.1:9080/bench
  10 threads and 500 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    19.89ms   21.49ms 170.27ms   79.58%
    Req/Sec     4.04k   366.68     5.23k    70.57%
  Latency Distribution
     50%    5.86ms
     75%   34.71ms
     90%   55.64ms
     99%   73.85ms
  1204726 requests in 30.01s, 199.91MB read
Requests/sec:  40148.63
Transfer/sec:      6.66MB
```

## Ando Startup Log (last 50 lines)
```
{"timestamp":"2026-02-20T07:07:35.601772Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.601799Z","level":"ERROR","fields":{"message":"Fail to proxy: Downstream ConnectionClosed context: Peer: addr: 127.0.0.1:3000, scheme: HTTP cause:  context: Prematurely before response header is sent, status: 0, tries: 1, retry: false, GET /bench, Host: 127.0.0.1:9080","log.target":"pingora_proxy","log.module_path":"pingora_proxy","log.file":"/Users/kowito/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/pingora-proxy-0.7.0/src/lib.rs","log.line":879},"target":"pingora_proxy","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.601805Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.601829Z","level":"ERROR","fields":{"message":"Fail to proxy: Downstream ConnectionClosed context: Peer: addr: 127.0.0.1:3000, scheme: HTTP cause:  context: Prematurely before response header is sent, status: 0, tries: 1, retry: false, GET /bench, Host: 127.0.0.1:9080","log.target":"pingora_proxy","log.module_path":"pingora_proxy","log.file":"/Users/kowito/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/pingora-proxy-0.7.0/src/lib.rs","log.line":879},"target":"pingora_proxy","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.601834Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.601860Z","level":"ERROR","fields":{"message":"Fail to proxy: Downstream ConnectionClosed context: Peer: addr: 127.0.0.1:3000, scheme: HTTP cause:  context: Prematurely before response header is sent, status: 0, tries: 1, retry: false, GET /bench, Host: 127.0.0.1:9080","log.target":"pingora_proxy","log.module_path":"pingora_proxy","log.file":"/Users/kowito/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/pingora-proxy-0.7.0/src/lib.rs","log.line":879},"target":"pingora_proxy","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.601864Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.601883Z","level":"ERROR","fields":{"message":"Fail to proxy: Downstream ConnectionClosed context: Peer: addr: 127.0.0.1:3000, scheme: HTTP cause:  context: Prematurely before response header is sent, status: 0, tries: 1, retry: false, GET /bench, Host: 127.0.0.1:9080","log.target":"pingora_proxy","log.module_path":"pingora_proxy","log.file":"/Users/kowito/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/pingora-proxy-0.7.0/src/lib.rs","log.line":879},"target":"pingora_proxy","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.601888Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.601910Z","level":"ERROR","fields":{"message":"Fail to proxy: Downstream ConnectionClosed context: Peer: addr: 127.0.0.1:3000, scheme: HTTP cause:  context: Prematurely before response header is sent, status: 0, tries: 1, retry: false, GET /bench, Host: 127.0.0.1:9080","log.target":"pingora_proxy","log.module_path":"pingora_proxy","log.file":"/Users/kowito/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/pingora-proxy-0.7.0/src/lib.rs","log.line":879},"target":"pingora_proxy","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.601915Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.601936Z","level":"ERROR","fields":{"message":"Fail to proxy: Downstream ConnectionClosed context: Peer: addr: 127.0.0.1:3000, scheme: HTTP cause:  context: Prematurely before response header is sent, status: 0, tries: 1, retry: false, GET /bench, Host: 127.0.0.1:9080","log.target":"pingora_proxy","log.module_path":"pingora_proxy","log.file":"/Users/kowito/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/pingora-proxy-0.7.0/src/lib.rs","log.line":879},"target":"pingora_proxy","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.601941Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.601963Z","level":"ERROR","fields":{"message":"Fail to proxy: Downstream ConnectionClosed context: Peer: addr: 127.0.0.1:3000, scheme: HTTP cause:  context: Prematurely before response header is sent, status: 0, tries: 1, retry: false, GET /bench, Host: 127.0.0.1:9080","log.target":"pingora_proxy","log.module_path":"pingora_proxy","log.file":"/Users/kowito/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/pingora-proxy-0.7.0/src/lib.rs","log.line":879},"target":"pingora_proxy","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.601968Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.601994Z","level":"ERROR","fields":{"message":"Fail to proxy: Downstream ConnectionClosed context: Peer: addr: 127.0.0.1:3000, scheme: HTTP cause:  context: Prematurely before response header is sent, status: 0, tries: 1, retry: false, GET /bench, Host: 127.0.0.1:9080","log.target":"pingora_proxy","log.module_path":"pingora_proxy","log.file":"/Users/kowito/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/pingora-proxy-0.7.0/src/lib.rs","log.line":879},"target":"pingora_proxy","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.602000Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.602021Z","level":"ERROR","fields":{"message":"Fail to proxy: Downstream ConnectionClosed context: Peer: addr: 127.0.0.1:3000, scheme: HTTP cause:  context: Prematurely before response header is sent, status: 0, tries: 1, retry: false, GET /bench, Host: 127.0.0.1:9080","log.target":"pingora_proxy","log.module_path":"pingora_proxy","log.file":"/Users/kowito/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/pingora-proxy-0.7.0/src/lib.rs","log.line":879},"target":"pingora_proxy","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.602026Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.602051Z","level":"ERROR","fields":{"message":"Fail to proxy: Downstream ConnectionClosed context: Peer: addr: 127.0.0.1:3000, scheme: HTTP cause:  context: Prematurely before response header is sent, status: 0, tries: 1, retry: false, GET /bench, Host: 127.0.0.1:9080","log.target":"pingora_proxy","log.module_path":"pingora_proxy","log.file":"/Users/kowito/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/pingora-proxy-0.7.0/src/lib.rs","log.line":879},"target":"pingora_proxy","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.602056Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.602079Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.602101Z","level":"ERROR","fields":{"message":"Fail to proxy: Downstream ConnectionClosed context: Peer: addr: 127.0.0.1:3000, scheme: HTTP cause:  context: Prematurely before response header is sent, status: 0, tries: 1, retry: false, GET /bench, Host: 127.0.0.1:9080","log.target":"pingora_proxy","log.module_path":"pingora_proxy","log.file":"/Users/kowito/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/pingora-proxy-0.7.0/src/lib.rs","log.line":879},"target":"pingora_proxy","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.602107Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.602124Z","level":"ERROR","fields":{"message":"Fail to proxy: Downstream ConnectionClosed context: Peer: addr: 127.0.0.1:3000, scheme: HTTP cause:  context: Prematurely before response header is sent, status: 0, tries: 1, retry: false, GET /bench, Host: 127.0.0.1:9080","log.target":"pingora_proxy","log.module_path":"pingora_proxy","log.file":"/Users/kowito/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/pingora-proxy-0.7.0/src/lib.rs","log.line":879},"target":"pingora_proxy","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.602129Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.602147Z","level":"ERROR","fields":{"message":"Fail to proxy: Downstream ConnectionClosed context: Peer: addr: 127.0.0.1:3000, scheme: HTTP cause:  context: Prematurely before response header is sent, status: 0, tries: 1, retry: false, GET /bench, Host: 127.0.0.1:9080","log.target":"pingora_proxy","log.module_path":"pingora_proxy","log.file":"/Users/kowito/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/pingora-proxy-0.7.0/src/lib.rs","log.line":879},"target":"pingora_proxy","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.602152Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.602198Z","level":"ERROR","fields":{"message":"Fail to proxy: Downstream ConnectionClosed context: Peer: addr: 127.0.0.1:3000, scheme: HTTP cause:  context: Prematurely before response header is sent, status: 0, tries: 1, retry: false, GET /bench, Host: 127.0.0.1:9080","log.target":"pingora_proxy","log.module_path":"pingora_proxy","log.file":"/Users/kowito/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/pingora-proxy-0.7.0/src/lib.rs","log.line":879},"target":"pingora_proxy","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.602203Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.602228Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.602268Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.602289Z","level":"ERROR","fields":{"message":"Fail to proxy: Downstream ConnectionClosed context: Peer: addr: 127.0.0.1:3000, scheme: HTTP cause:  context: Prematurely before response header is sent, status: 0, tries: 1, retry: false, GET /bench, Host: 127.0.0.1:9080","log.target":"pingora_proxy","log.module_path":"pingora_proxy","log.file":"/Users/kowito/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/pingora-proxy-0.7.0/src/lib.rs","log.line":879},"target":"pingora_proxy","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.602294Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.602338Z","level":"ERROR","fields":{"message":"Fail to proxy: Downstream ConnectionClosed context: Peer: addr: 127.0.0.1:3000, scheme: HTTP cause:  context: Prematurely before response header is sent, status: 0, tries: 1, retry: false, GET /bench, Host: 127.0.0.1:9080","log.target":"pingora_proxy","log.module_path":"pingora_proxy","log.file":"/Users/kowito/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/pingora-proxy-0.7.0/src/lib.rs","log.line":879},"target":"pingora_proxy","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.602344Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.602361Z","level":"ERROR","fields":{"message":"Fail to proxy: Downstream ConnectionClosed context: Peer: addr: 127.0.0.1:3000, scheme: HTTP cause:  context: Prematurely before response header is sent, status: 0, tries: 1, retry: false, GET /bench, Host: 127.0.0.1:9080","log.target":"pingora_proxy","log.module_path":"pingora_proxy","log.file":"/Users/kowito/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/pingora-proxy-0.7.0/src/lib.rs","log.line":879},"target":"pingora_proxy","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.602366Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.602455Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.602473Z","level":"ERROR","fields":{"message":"Fail to proxy: Downstream ConnectionClosed context: Peer: addr: 127.0.0.1:3000, scheme: HTTP cause:  context: Prematurely before response header is sent, status: 0, tries: 1, retry: false, GET /bench, Host: 127.0.0.1:9080","log.target":"pingora_proxy","log.module_path":"pingora_proxy","log.file":"/Users/kowito/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/pingora-proxy-0.7.0/src/lib.rs","log.line":879},"target":"pingora_proxy","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.602478Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.602495Z","level":"ERROR","fields":{"message":"Fail to proxy: Downstream ConnectionClosed context: Peer: addr: 127.0.0.1:3000, scheme: HTTP cause:  context: Prematurely before response header is sent, status: 0, tries: 1, retry: false, GET /bench, Host: 127.0.0.1:9080","log.target":"pingora_proxy","log.module_path":"pingora_proxy","log.file":"/Users/kowito/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/pingora-proxy-0.7.0/src/lib.rs","log.line":879},"target":"pingora_proxy","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.602500Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.602549Z","level":"ERROR","fields":{"message":"Fail to proxy: Downstream ConnectionClosed context: Peer: addr: 127.0.0.1:3000, scheme: HTTP cause:  context: Prematurely before response header is sent, status: 0, tries: 1, retry: false, GET /bench, Host: 127.0.0.1:9080","log.target":"pingora_proxy","log.module_path":"pingora_proxy","log.file":"/Users/kowito/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/pingora-proxy-0.7.0/src/lib.rs","log.line":879},"target":"pingora_proxy","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.602554Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.602572Z","level":"ERROR","fields":{"message":"Fail to proxy: Downstream ConnectionClosed context: Peer: addr: 127.0.0.1:3000, scheme: HTTP cause:  context: Prematurely before response header is sent, status: 0, tries: 1, retry: false, GET /bench, Host: 127.0.0.1:9080","log.target":"pingora_proxy","log.module_path":"pingora_proxy","log.file":"/Users/kowito/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/pingora-proxy-0.7.0/src/lib.rs","log.line":879},"target":"pingora_proxy","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.602577Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.602621Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.602640Z","level":"ERROR","fields":{"message":"Fail to proxy: Downstream ConnectionClosed context: Peer: addr: 127.0.0.1:3000, scheme: HTTP cause:  context: Prematurely before response header is sent, status: 0, tries: 1, retry: false, GET /bench, Host: 127.0.0.1:9080","log.target":"pingora_proxy","log.module_path":"pingora_proxy","log.file":"/Users/kowito/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/pingora-proxy-0.7.0/src/lib.rs","log.line":879},"target":"pingora_proxy","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:07:35.602645Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
```
