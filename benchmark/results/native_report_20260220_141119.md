# Ando Native Benchmark Report

**Date**: 2026-02-20 14:13:39 +07
**Host**: macOS — Apple M4 (10 logical cores)
**Tool**: wrk
**Duration**: 30s
**Threads**: 10

---

## Results Summary

| Scenario | Req/sec | p99 Latency |
|---|---|---|
| Backend Baseline (no proxy) | 193664.23 | 1.25ms |
| Plain Proxy (200c) | 41794.50 | 5.40ms |
| Key-Auth Plugin (200c) | 0.00 | 0.00us |
| Stress Test (500c) | 39879.05 | 74.51ms |

---

## Scenario 0 — Backend Baseline
```
Running 15s test @ http://127.0.0.1:3000/
  10 threads and 200 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency     1.01ms  129.62us   9.06ms   95.80%
    Req/Sec    19.46k   693.06    20.18k    95.83%
  Latency Distribution
     50%    1.00ms
     75%    1.04ms
     90%    1.08ms
     99%    1.25ms
  2924383 requests in 15.10s, 287.26MB read
Requests/sec: 193664.23
Transfer/sec:     19.02MB
```

## Scenario 1 — Plain Proxy
```
Running 30s test @ http://127.0.0.1:9080/bench
  10 threads and 200 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency     4.80ms  812.53us  26.76ms   95.88%
    Req/Sec     4.20k   163.08     4.51k    88.47%
  Latency Distribution
     50%    4.83ms
     75%    4.97ms
     90%    5.08ms
     99%    5.40ms
  1258195 requests in 30.10s, 208.78MB read
Requests/sec:  41794.50
Transfer/sec:      6.94MB
```

## Scenario 2 — Key-Auth Plugin
```
Running 30s test @ http://127.0.0.1:9080/bench-auth
  10 threads and 200 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency     0.00us    0.00us   0.00us     nan%
    Req/Sec     0.00      0.00     0.00       nan%
  Latency Distribution
     50%    0.00us
     75%    0.00us
     90%    0.00us
     99%    0.00us
  0 requests in 30.07s, 31.64KB read
Requests/sec:      0.00
Transfer/sec:      1.05KB
```

## Scenario 3 — Stress Test
```
Running 30s test @ http://127.0.0.1:9080/bench
  10 threads and 500 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    20.06ms   21.67ms 147.42ms   79.53%
    Req/Sec     4.01k   353.31     5.50k    71.21%
  Latency Distribution
     50%    5.89ms
     75%   34.99ms
     90%   56.23ms
     99%   74.51ms
  1200510 requests in 30.10s, 199.21MB read
Requests/sec:  39879.05
Transfer/sec:      6.62MB
```

## Ando Startup Log (last 50 lines)
```
{"timestamp":"2026-02-20T07:13:39.550185Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.550212Z","level":"ERROR","fields":{"message":"Fail to proxy: Downstream ConnectionClosed context: Peer: addr: 127.0.0.1:3000, scheme: HTTP cause:  context: Prematurely before response header is sent, status: 0, tries: 1, retry: false, GET /bench, Host: 127.0.0.1:9080","log.target":"pingora_proxy","log.module_path":"pingora_proxy","log.file":"/Users/kowito/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/pingora-proxy-0.7.0/src/lib.rs","log.line":879},"target":"pingora_proxy","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.550217Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.550235Z","level":"ERROR","fields":{"message":"Fail to proxy: Downstream ConnectionClosed context: Peer: addr: 127.0.0.1:3000, scheme: HTTP cause:  context: Prematurely before response header is sent, status: 0, tries: 1, retry: false, GET /bench, Host: 127.0.0.1:9080","log.target":"pingora_proxy","log.module_path":"pingora_proxy","log.file":"/Users/kowito/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/pingora-proxy-0.7.0/src/lib.rs","log.line":879},"target":"pingora_proxy","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.550241Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.550283Z","level":"ERROR","fields":{"message":"Fail to proxy: Downstream ConnectionClosed context: Peer: addr: 127.0.0.1:3000, scheme: HTTP cause:  context: Prematurely before response header is sent, status: 0, tries: 1, retry: false, GET /bench, Host: 127.0.0.1:9080","log.target":"pingora_proxy","log.module_path":"pingora_proxy","log.file":"/Users/kowito/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/pingora-proxy-0.7.0/src/lib.rs","log.line":879},"target":"pingora_proxy","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.550288Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.550311Z","level":"ERROR","fields":{"message":"Fail to proxy: Downstream ConnectionClosed context: Peer: addr: 127.0.0.1:3000, scheme: HTTP cause:  context: Prematurely before response header is sent, status: 0, tries: 1, retry: false, GET /bench, Host: 127.0.0.1:9080","log.target":"pingora_proxy","log.module_path":"pingora_proxy","log.file":"/Users/kowito/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/pingora-proxy-0.7.0/src/lib.rs","log.line":879},"target":"pingora_proxy","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.550316Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.550338Z","level":"ERROR","fields":{"message":"Fail to proxy: Downstream ConnectionClosed context: Peer: addr: 127.0.0.1:3000, scheme: HTTP cause:  context: Prematurely before response header is sent, status: 0, tries: 1, retry: false, GET /bench, Host: 127.0.0.1:9080","log.target":"pingora_proxy","log.module_path":"pingora_proxy","log.file":"/Users/kowito/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/pingora-proxy-0.7.0/src/lib.rs","log.line":879},"target":"pingora_proxy","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.550343Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.550361Z","level":"ERROR","fields":{"message":"Fail to proxy: Downstream ConnectionClosed context: Peer: addr: 127.0.0.1:3000, scheme: HTTP cause:  context: Prematurely before response header is sent, status: 0, tries: 1, retry: false, GET /bench, Host: 127.0.0.1:9080","log.target":"pingora_proxy","log.module_path":"pingora_proxy","log.file":"/Users/kowito/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/pingora-proxy-0.7.0/src/lib.rs","log.line":879},"target":"pingora_proxy","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.550367Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.550415Z","level":"ERROR","fields":{"message":"Fail to proxy: Downstream ConnectionClosed context: Peer: addr: 127.0.0.1:3000, scheme: HTTP cause:  context: Prematurely before response header is sent, status: 0, tries: 1, retry: false, GET /bench, Host: 127.0.0.1:9080","log.target":"pingora_proxy","log.module_path":"pingora_proxy","log.file":"/Users/kowito/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/pingora-proxy-0.7.0/src/lib.rs","log.line":879},"target":"pingora_proxy","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.550421Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.550441Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.550462Z","level":"ERROR","fields":{"message":"Fail to proxy: Downstream ConnectionClosed context: Peer: addr: 127.0.0.1:3000, scheme: HTTP cause:  context: Prematurely before response header is sent, status: 0, tries: 1, retry: false, GET /bench, Host: 127.0.0.1:9080","log.target":"pingora_proxy","log.module_path":"pingora_proxy","log.file":"/Users/kowito/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/pingora-proxy-0.7.0/src/lib.rs","log.line":879},"target":"pingora_proxy","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.550467Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.550485Z","level":"ERROR","fields":{"message":"Fail to proxy: Downstream ConnectionClosed context: Peer: addr: 127.0.0.1:3000, scheme: HTTP cause:  context: Prematurely before response header is sent, status: 0, tries: 1, retry: false, GET /bench, Host: 127.0.0.1:9080","log.target":"pingora_proxy","log.module_path":"pingora_proxy","log.file":"/Users/kowito/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/pingora-proxy-0.7.0/src/lib.rs","log.line":879},"target":"pingora_proxy","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.550489Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.550510Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.550529Z","level":"ERROR","fields":{"message":"Fail to proxy: Downstream ConnectionClosed context: Peer: addr: 127.0.0.1:3000, scheme: HTTP cause:  context: Prematurely before response header is sent, status: 0, tries: 1, retry: false, GET /bench, Host: 127.0.0.1:9080","log.target":"pingora_proxy","log.module_path":"pingora_proxy","log.file":"/Users/kowito/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/pingora-proxy-0.7.0/src/lib.rs","log.line":879},"target":"pingora_proxy","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.550535Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.550555Z","level":"ERROR","fields":{"message":"Fail to proxy: Downstream ConnectionClosed context: Peer: addr: 127.0.0.1:3000, scheme: HTTP cause:  context: Prematurely before response header is sent, status: 0, tries: 1, retry: false, GET /bench, Host: 127.0.0.1:9080","log.target":"pingora_proxy","log.module_path":"pingora_proxy","log.file":"/Users/kowito/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/pingora-proxy-0.7.0/src/lib.rs","log.line":879},"target":"pingora_proxy","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.550561Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.550608Z","level":"ERROR","fields":{"message":"Fail to proxy: Downstream ConnectionClosed context: Peer: addr: 127.0.0.1:3000, scheme: HTTP cause:  context: Prematurely before response header is sent, status: 0, tries: 1, retry: false, GET /bench, Host: 127.0.0.1:9080","log.target":"pingora_proxy","log.module_path":"pingora_proxy","log.file":"/Users/kowito/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/pingora-proxy-0.7.0/src/lib.rs","log.line":879},"target":"pingora_proxy","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.550613Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.550631Z","level":"ERROR","fields":{"message":"Fail to proxy: Downstream ConnectionClosed context: Peer: addr: 127.0.0.1:3000, scheme: HTTP cause:  context: Prematurely before response header is sent, status: 0, tries: 1, retry: false, GET /bench, Host: 127.0.0.1:9080","log.target":"pingora_proxy","log.module_path":"pingora_proxy","log.file":"/Users/kowito/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/pingora-proxy-0.7.0/src/lib.rs","log.line":879},"target":"pingora_proxy","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.550636Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.550684Z","level":"ERROR","fields":{"message":"Fail to proxy: Downstream ConnectionClosed context: Peer: addr: 127.0.0.1:3000, scheme: HTTP cause:  context: Prematurely before response header is sent, status: 0, tries: 1, retry: false, GET /bench, Host: 127.0.0.1:9080","log.target":"pingora_proxy","log.module_path":"pingora_proxy","log.file":"/Users/kowito/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/pingora-proxy-0.7.0/src/lib.rs","log.line":879},"target":"pingora_proxy","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.550689Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.550707Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.550726Z","level":"ERROR","fields":{"message":"Fail to proxy: Downstream ConnectionClosed context: Peer: addr: 127.0.0.1:3000, scheme: HTTP cause:  context: Prematurely before response header is sent, status: 0, tries: 1, retry: false, GET /bench, Host: 127.0.0.1:9080","log.target":"pingora_proxy","log.module_path":"pingora_proxy","log.file":"/Users/kowito/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/pingora-proxy-0.7.0/src/lib.rs","log.line":879},"target":"pingora_proxy","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.550731Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.550772Z","level":"ERROR","fields":{"message":"Fail to proxy: Downstream ConnectionClosed context: Peer: addr: 127.0.0.1:3000, scheme: HTTP cause:  context: Prematurely before response header is sent, status: 0, tries: 1, retry: false, GET /bench, Host: 127.0.0.1:9080","log.target":"pingora_proxy","log.module_path":"pingora_proxy","log.file":"/Users/kowito/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/pingora-proxy-0.7.0/src/lib.rs","log.line":879},"target":"pingora_proxy","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.550777Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.550796Z","level":"ERROR","fields":{"message":"Fail to proxy: Downstream ConnectionClosed context: Peer: addr: 127.0.0.1:3000, scheme: HTTP cause:  context: Prematurely before response header is sent, status: 0, tries: 1, retry: false, GET /bench, Host: 127.0.0.1:9080","log.target":"pingora_proxy","log.module_path":"pingora_proxy","log.file":"/Users/kowito/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/pingora-proxy-0.7.0/src/lib.rs","log.line":879},"target":"pingora_proxy","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.550801Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.550859Z","level":"ERROR","fields":{"message":"Fail to proxy: Downstream ConnectionClosed context: Peer: addr: 127.0.0.1:3000, scheme: HTTP cause:  context: Prematurely before response header is sent, status: 0, tries: 1, retry: false, GET /bench, Host: 127.0.0.1:9080","log.target":"pingora_proxy","log.module_path":"pingora_proxy","log.file":"/Users/kowito/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/pingora-proxy-0.7.0/src/lib.rs","log.line":879},"target":"pingora_proxy","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.550864Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.550908Z","level":"ERROR","fields":{"message":"Fail to proxy: Downstream ConnectionClosed context: Peer: addr: 127.0.0.1:3000, scheme: HTTP cause:  context: Prematurely before response header is sent, status: 0, tries: 1, retry: false, GET /bench, Host: 127.0.0.1:9080","log.target":"pingora_proxy","log.module_path":"pingora_proxy","log.file":"/Users/kowito/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/pingora-proxy-0.7.0/src/lib.rs","log.line":879},"target":"pingora_proxy","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.550913Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.550934Z","level":"ERROR","fields":{"message":"Fail to proxy: Downstream ConnectionClosed context: Peer: addr: 127.0.0.1:3000, scheme: HTTP cause:  context: Prematurely before response header is sent, status: 0, tries: 1, retry: false, GET /bench, Host: 127.0.0.1:9080","log.target":"pingora_proxy","log.module_path":"pingora_proxy","log.file":"/Users/kowito/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/pingora-proxy-0.7.0/src/lib.rs","log.line":879},"target":"pingora_proxy","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.550938Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.550958Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.551013Z","level":"ERROR","fields":{"message":"Fail to proxy: Downstream ConnectionClosed context: Peer: addr: 127.0.0.1:3000, scheme: HTTP cause:  context: Prematurely before response header is sent, status: 0, tries: 1, retry: false, GET /bench, Host: 127.0.0.1:9080","log.target":"pingora_proxy","log.module_path":"pingora_proxy","log.file":"/Users/kowito/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/pingora-proxy-0.7.0/src/lib.rs","log.line":879},"target":"pingora_proxy","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.551018Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.551037Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.551057Z","level":"ERROR","fields":{"message":"Fail to proxy: Downstream ConnectionClosed context: Peer: addr: 127.0.0.1:3000, scheme: HTTP cause:  context: Prematurely before response header is sent, status: 0, tries: 1, retry: false, GET /bench, Host: 127.0.0.1:9080","log.target":"pingora_proxy","log.module_path":"pingora_proxy","log.file":"/Users/kowito/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/pingora-proxy-0.7.0/src/lib.rs","log.line":879},"target":"pingora_proxy","threadId":"ThreadId(3)"}
{"timestamp":"2026-02-20T07:13:39.551062Z","level":"WARN","fields":{"message":"Log buffer full, dropping entry: channel closed"},"target":"ando_observability::logger","threadId":"ThreadId(3)"}
```
